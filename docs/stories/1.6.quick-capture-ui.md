# Story 1.6: Quick Capture Frontend Component

## Status
Draft

## Story
**As an** entrepreneur with an idea,
**I want** to quickly write down my idea in a simple text field with auto-save,
**so that** I can capture my thoughts before they disappear.

## Acceptance Criteria
1. Clean, minimal text input area for idea content on the home page
2. Auto-save functionality to prevent data loss during typing
3. Character count display encouraging concise ideas (1-10000 limit)
4. Responsive design working on mobile and desktop
5. Success feedback when idea is successfully captured
6. Integration with authentication to ensure user-specific idea storage

## Tasks / Subtasks
- [ ] Create Quick Capture page component (AC: 1)
  - [ ] Create pages/index.tsx as the main Quick Capture screen
  - [ ] Implement full-screen textarea with minimal design
  - [ ] Add subtle placeholder text encouraging idea capture
  - [ ] Style component with IdeaStash design system colors
- [ ] Implement auto-save functionality (AC: 2)
  - [ ] Create useAutoSave custom hook with debounced saving
  - [ ] Save drafts to local storage for offline persistence
  - [ ] Save drafts to API endpoint when user is authenticated
  - [ ] Show auto-save indicator (saving/saved states)
- [ ] Add character count display (AC: 3)
  - [ ] Create character counter component with visual feedback
  - [ ] Show current count vs maximum (10000) limit
  - [ ] Change color styling as user approaches limit
  - [ ] Prevent input beyond maximum character limit
- [ ] Implement responsive design (AC: 4)
  - [ ] Test layout on mobile (320px+), tablet (768px+), desktop (1024px+)
  - [ ] Optimize textarea size for different screen dimensions
  - [ ] Ensure touch-friendly interactions on mobile devices
  - [ ] Test keyboard accessibility across devices
- [ ] Add success feedback system (AC: 5)
  - [ ] Show toast notification when idea is saved successfully
  - [ ] Display save timestamp for user confirmation
  - [ ] Handle and display error states for failed saves
  - [ ] Provide visual confirmation of auto-save status
- [ ] Integrate with authentication (AC: 6)
  - [ ] Check user authentication status on page load
  - [ ] Redirect to sign-in if user is not authenticated
  - [ ] Associate captured ideas with authenticated user ID
  - [ ] Handle authentication state changes during idea capture

## Dev Notes

### Previous Story Insights
Requires Stories 1.3 (auth), 1.4 (UI components), 1.5 (API) completion for full integration.

### Quick Capture Design Requirements
[Source: docs/front-end-spec.md]
**Quick Capture Screen Elements:**
- Full-screen text area with subtle placeholder text
- Character count (subtle, non-intrusive positioning)
- Auto-save indicator (small, in corner)
- Two action buttons: "Save Draft" (primary), "Commit Now" (secondary)
- Offline status indicator when applicable

**Interaction Notes:**
- Text area auto-focuses on screen entry
- Keyboard shortcuts for save actions
- Swipe gestures for navigation (mobile)

### Component Architecture
[Source: architecture/unified-project-structure.md]
**File Locations:**
- Main page: `pages/index.tsx`
- Quick Capture component: `src/components/ideas/QuickCapture.tsx`
- Auto-save hook: `src/hooks/useAutoSave.ts`
- API integration: `src/lib/services/ideaService.ts`

### Auto-Save Implementation
**Local Storage Strategy:**
- Save drafts locally every 2 seconds while typing
- Sync to server every 10 seconds when authenticated
- Persist across browser sessions and page refreshes
- Clear local storage when idea is successfully committed

### API Integration
[Source: stories/1.5.api-endpoints.md]
**API Endpoint Usage:**
- POST /api/ideas with content and status='draft'
- Handle 401 authentication errors gracefully
- Retry failed requests with exponential backoff
- Show connection status to user

### Design System Integration
[Source: stories/1.4.ui-components.md]
**Component Usage:**
- Use Button component for save actions with primary/secondary variants
- Use Input component base styling for textarea
- Use Spinner component for loading states
- Implement responsive breakpoints from design system

### Authentication Integration
[Source: stories/1.3.clerk-auth.md]
**Clerk Integration:**
- Use ProtectedRoute component to guard Quick Capture page
- Access user data from Clerk context
- Handle sign-in redirects and session management
- Associate ideas with user.id from Clerk session

### Testing Standards
[Source: architecture/testing-strategy.md]
- Component tests: `__tests__/components/QuickCapture.test.tsx`
- Hook tests: `__tests__/hooks/useAutoSave.test.ts`
- Integration tests: Test auto-save with mocked API
- E2E tests: Complete idea capture flow with authentication

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-09-25 | 1.0 | Initial Quick Capture frontend story | Bob (Scrum Master) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

## QA Results
*This section will be populated by the QA agent after story completion*